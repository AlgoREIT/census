{% load helpertags %}

<dl>
  <dt>County (parishes in LA)</dt><dd>The primary subdivisions of states. To cover the full country, this includes Virginia's cities and Baltimore, St. Louis and Carson City, Nev., which sit outside counties; the District of Columbia; and the boroughs, census areas and related areas in Alaska.<dd>
  <dt>Place</dt><dd><ol><li>What most people call cities or towns. A locality incorporated under state law that acts as a local government.</li><li>An unincorporated area that is well-known locally. Defined by state officals under Census Bureau rules and called a "census designated place." "CDP" is added to its name.</li><dd>
  <dt>County subdivision</dt><dd>In 12 states (CT, MA, ME, MI, MN, NH, NJ, NY, PA, RI, VT, WI), they are fully functioning local governments. In 16 states (AR, IL, IN, IA, KS, LA, MD, MS, MO, NE, NC, ND, OH, SD, VA, WV) they have limited governmental powers. In these 28 states, types include townships, towns, villages, boroughs, districts and other forms. In 21 states (AL, AZ, CA, CO, DE, FL, GA, HI, ID, KY, MT, NV, NM, OK, OR, SC, TN, TX, UT, WA, WY) they have no legal or government roles. In these states, they are called "census county divisions" and "CCD" is added to their name.<dd>
  <dt>Census tract</dt><dd>Vary in size but averages 4,000 people. Designed to remain relatively stable across decades to allow comparisons. Statistical areas defined by the Census Bureau with local input.<dd>
</dl>

<script id="query-template" type="x-js-template">

    <% if (query.summarylevel) { %>
        Find data for <b><%= query.summarylevelDisplay %></b>
    <% } else { %>
        Find data for
        <span id="summarylevel-select">
          <span class="link" data-val="tract">Tracts</span>,
          <span class="link" data-val="place">Places</span>,
          <span class="link" data-val="subdivision">County Subdivisions</span>,
          <span class="link" data-val="county">Counties</span>,
          <span class="link" data-val="state">States</span>, or
          <span class="link" data-val="nation">the USA</span>.
      </span>
    <% } %>

    <% if (query.summarylevel && (query.summarylevel != 'nation') && !query.state) { %>
        in
        <span id="state-select">
            <% var states = query.filtered(query.mappings.states); %>
            <% _.each(states, function(pair, i) { %>
                <span class="link" data-val="<%= pair[1] %>"><%= pair[0] %></span><%= i == states.length - 1 ? '' : ', ' %>
            <% }); %>
        </span>
    <% } else if (query.state) { %>
        in <b><%= query.stateDisplay %></b>
    <% } %>

    <% if (query.mappings.counties && !query.county) { %>
        for
        <span id="county-select">
            <% var counties = query.filtered(query.mappings.counties); %>
            <% _.each(counties, function(pair, i) { %>
                <span class="link" data-val="<%= '' + pair[2] + pair[1] %>"><%= pair[0] %></span><%= i == counties.length - 1 ? '' : ', ' %>
            <% }); %>
        </span>
    <% } else if (query.county) { %>
        - <b><%= query.countyDisplay %></b>.
    <% } %>

    <% if (query.mappings.places && !query.place) { %>
        for
        <span id="place-select">
            <% var places = query.filtered(query.mappings.places); %>
            <% _.each(places, function(pair, i) { %>
                <span class="link" data-val="<%= pair[1] %>"><%= pair[0] %></span><%= i == places.length - 1 ? '' : ', ' %>
            <% }); %>
        </span>
    <% } else if (query.place) { %>
        - <b><%= query.placeDisplay %></b>.
    <% } %>

    <% if (query.mappings.subdivisions && !query.subdivision) { %>
        for
        <span id="subdivision-select">
            <% var subdivisions = query.filtered(query.mappings.subdivisions); %>
            <% _.each(subdivisions, function(pair, i) { %>
                <span class="link" data-val="<%= pair[1] %>"><%= pair[0] %></span><%= i == subdivisions.length - 1 ? '' : ', ' %>
            <% }); %>
        </span>
    <% } else if (query.subdivision) { %>
        - <b><%= query.subdivisionDisplay %></b>.
    <% } %>

    <% if (query.isCompletable()) { %>
        <button>Go</button>
    <% } %>

</script>